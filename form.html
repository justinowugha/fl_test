<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>British Classic Fantasy League 2025 â€“ Entry Form</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: #050816;
      color: #e5e7eb;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    .page-enter {
      opacity: 0;
      transform: translateX(10px);
    }
    .page-enter-active {
      opacity: 1;
      transform: translateX(0);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    .page-leave {
      opacity: 1;
      transform: translateX(0);
    }
    .page-leave-active {
      opacity: 0;
      transform: translateX(-10px);
      transition: opacity 0.25s ease, transform 0.25s ease;
    }
    .conf-radio input[type="radio"] {
      display: none;
    }
    .conf-radio label {
      cursor: pointer;
      padding: 0.35rem 0.55rem;
      border-radius: 9999px;
      border-width: 1px;
      font-size: 0.75rem;
      line-height: 1rem;
      min-width: 2rem;
      text-align: center;
      transition: background-color 0.15s ease, color 0.15s ease, border-color 0.15s ease;
      user-select: none;
    }
    .conf-radio input[type="radio"]:checked + label {
      background-color: rgb(248 113 113); /* red-400 */
      color: rgb(17 24 39); /* gray-900 */
      border-color: rgb(248 113 113);
      font-weight: 600;
    }
    .conf-radio input[type="radio"]:disabled + label {
      opacity: 0.25;
      cursor: not-allowed;
    }
  </style>
</head>
<body class="min-h-screen">

  <script>
    // Soft-gate: allow if access=spotify OR token=... (for magic link editing later)
    (function () {
      const params = new URLSearchParams(window.location.search);
      const access = params.get('access');
      const token = params.get('token');
      if (access !== 'spotify' && !token) {
        document.body.innerHTML =
          '<div class="min-h-screen flex items-center justify-center bg-gray-900 text-gray-100">' +
          '<div class="max-w-md text-center px-6">' +
          '<h2 class="text-2xl font-bold mb-4">Access denied</h2>' +
          '<p class="text-sm text-gray-300">Please enter the league via the official British Classic Fantasy League website.</p>' +
          '</div></div>';
      }
    })();
  </script>

  <div class="min-h-screen flex items-center justify-center px-3 py-6">
    <div class="w-full max-w-4xl bg-gray-900/90 border border-gray-800 rounded-2xl shadow-xl relative overflow-hidden">
      <!-- Header / Progress -->
      <div class="border-b border-gray-800 px-4 sm:px-6 py-4 bg-gray-900/80">
        <div class="flex items-center justify-between gap-3">
          <div>
            <h1 class="text-lg sm:text-xl font-bold text-white">
              British Classic Fantasy League 2025 ðŸ‡¬ðŸ‡§
            </h1>
            <p class="text-xs sm:text-sm text-gray-400 mt-1">
              Make your predictions below. Confidence ratings must be unique from 1 (least confident) to 16 (most confident).
            </p>
          </div>
          <div class="hidden sm:flex flex-col items-end">
            <span id="step-label" class="text-xs font-semibold uppercase tracking-wide text-gray-400">
              Step 1 of 3
            </span>
            <div class="mt-1 flex gap-1">
              <div id="dot-1" class="h-1.5 w-6 rounded-full bg-red-500"></div>
              <div id="dot-2" class="h-1.5 w-6 rounded-full bg-gray-700"></div>
              <div id="dot-3" class="h-1.5 w-6 rounded-full bg-gray-700"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Form -->
      <form id="fantasy-form" class="px-4 sm:px-6 py-5 space-y-6">
        <!-- Step 1: Player info + Women's classes -->
        <div class="form-step" data-step="1">
          <h2 class="text-base sm:text-lg font-semibold text-red-400 mb-3">
            Step 1 â€“ Player Details & Womenâ€™s Weight Classes
          </h2>

          <!-- Player details -->
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-5">
            <div>
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Full Name <span class="text-red-400">*</span>
              </label>
              <input
                type="text"
                name="player_name"
                class="w-full rounded-md border border-gray-700 bg-gray-900/70 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                required
              />
            </div>
            <div>
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Email Address <span class="text-red-400">*</span>
              </label>
              <input
                type="email"
                name="player_email"
                class="w-full rounded-md border border-gray-700 bg-gray-900/70 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                required
              />
              <p class="mt-1 text-[10px] text-gray-400">
                Your confirmation + magic edit link will be emailed here. Please check junk/spam if it doesnâ€™t appear.
              </p>
            </div>
          </div>

          <div class="rounded-xl border border-gray-800 bg-gray-900/70 p-3 sm:p-4 mb-4">
            <p class="text-xs text-gray-300">
              For each weight class:
            </p>
            <ul class="mt-1 list-disc list-inside text-[11px] text-gray-400 space-y-1">
              <li>Select your predicted winner.</li>
              <li>Choose a unique confidence rating from <span class="font-semibold text-red-300">1 (least confident)</span> to <span class="font-semibold text-red-300">16 (most confident)</span> â€“ each number can only be used once across all 16 classes.</li>
              <li>Enter your predicted winning total (no units, numbers only).</li>
            </ul>
          </div>

          <!-- WOMEN â€“ 47 kg -->
          <div class="mb-6 border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/60">
            <div class="flex items-center justify-between gap-2 mb-3">
              <h3 class="text-sm font-semibold text-white">
                47 kg Women
              </h3>
              <span class="text-[10px] text-gray-400 uppercase tracking-wide">
                Class 1 / 16
              </span>
            </div>

            <!-- Winner -->
            <div class="mb-3">
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winner <span class="text-red-400">*</span>
              </label>
              <select
                name="w47_winner"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                required
              >
                <option value="">Select lifterâ€¦</option>
                <option>Anais Falcon (325 kg)</option>
                <option>Sharvari Karnik (322.5 kg)</option>
                <option>Nikola Murray (320 kg)</option>
                <option>Lauren Murray (307.5 kg)</option>
                <option>Gigi Nicolson (305 kg)</option>
              </select>
            </div>

            <!-- Confidence -->
            <div class="mb-3">
              <div class="flex items-center justify-between mb-1">
                <label class="block text-xs font-semibold text-gray-300">
                  Confidence Rating (1â€“16, unique) <span class="text-red-400">*</span>
                </label>
                <span class="text-[10px] text-gray-500">1 = least Â· 16 = most</span>
              </div>
              <div class="conf-radio flex flex-wrap gap-1.5">
                <!-- radios 1..16 -->
                <!-- name is the group key; weâ€™ll enforce uniqueness via JS -->
                <!-- data-conf-group used by JS to manage uniqueness -->
                <script>
                  // weâ€™ll render these with JS after DOM load to avoid huge repetition
                </script>
              </div>
            </div>

            <!-- Total -->
            <div>
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winning Total (kg, numbers only) <span class="text-red-400">*</span>
              </label>
              <input
                type="text"
                inputmode="numeric"
                pattern="^[0-9]{2,4}$"
                name="w47_total"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                placeholder="e.g. 325"
                required
              />
              <p class="mt-1 text-[10px] text-gray-500">Use as many digits as needed (no decimals or units).</p>
            </div>
          </div>

          <!-- WOMEN â€“ 52 kg -->
          <div class="mb-6 border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/60">
            <div class="flex items-center justify-between gap-2 mb-3">
              <h3 class="text-sm font-semibold text-white">
                52 kg Women
              </h3>
              <span class="text-[10px] text-gray-400 uppercase tracking-wide">
                Class 2 / 16
              </span>
            </div>

            <div class="mb-3">
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winner <span class="text-red-400">*</span>
              </label>
              <select
                name="w52_winner"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                required
              >
                <option value="">Select lifterâ€¦</option>
                <option>Leoni Tatman (395 kg)</option>
                <option>Molly Clark (383 kg)</option>
                <option>Emily Caton (382.5 kg)</option>
                <option>Cherry Yeung-Murray (372.5 kg)</option>
                <option>Kayley Phillips (355 kg)</option>
                <option>AlizÃ©e Tran (347.5 kg)</option>
                <option>Christina Bull (320 kg)</option>
                <option>Amethyst Johnson (320 kg)</option>
                <option>Aimee Law (315 kg)</option>
              </select>
            </div>

            <div class="mb-3">
              <div class="flex items-center justify-between mb-1">
                <label class="block text-xs font-semibold text-gray-300">
                  Confidence Rating (1â€“16, unique) <span class="text-red-400">*</span>
                </label>
                <span class="text-[10px] text-gray-500">1 = least Â· 16 = most</span>
              </div>
              <div class="conf-radio flex flex-wrap gap-1.5" data-conf-group="w52_conf"></div>
            </div>

            <div>
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winning Total (kg, numbers only) <span class="text-red-400">*</span>
              </label>
              <input
                type="text"
                inputmode="numeric"
                pattern="^[0-9]{2,4}$"
                name="w52_total"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                placeholder="e.g. 395"
                required
              />
            </div>
          </div>

          <!-- WOMEN â€“ 57 kg -->
          <div class="mb-6 border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/60">
            <div class="flex items-center justify-between gap-2 mb-3">
              <h3 class="text-sm font-semibold text-white">
                57 kg Women
              </h3>
              <span class="text-[10px] text-gray-400 uppercase tracking-wide">
                Class 3 / 16
              </span>
            </div>

            <div class="mb-3">
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winner <span class="text-red-400">*</span>
              </label>
              <select
                name="w57_winner"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                required
              >
                <option value="">Select lifterâ€¦</option>
                <option>Joy Nnamani (506 kg)</option>
                <option>Bobbie Butters (491.5 kg)</option>
                <option>Adejoke Adetayo (478 kg)</option>
                <option>Caitlin Baxter (432.5 kg)</option>
                <option>Katie Rimell (402.5 kg)</option>
                <option>Sveva Galizia (395 kg)</option>
                <option>Yana Lyntovska (390 kg)</option>
                <option>Becky Clarke (385.5 kg)</option>
                <option>Natalie Jeal (380 kg)</option>
                <option>Kelly Canones (355 kg)</option>
                <option>Morag Campbell (347.5 kg)</option>
                <option>Holly Judge (342.5 kg)</option>
                <option>Nasmeen Imran (337.5 kg)</option>
                <option>Chloe Cheevers (330.5 kg)</option>
              </select>
            </div>

            <div class="mb-3">
              <div class="flex items-center justify-between mb-1">
                <label class="block text-xs font-semibold text-gray-300">
                  Confidence Rating (1â€“16, unique) <span class="text-red-400">*</span>
                </label>
                <span class="text-[10px] text-gray-500">1 = least Â· 16 = most</span>
              </div>
              <div class="conf-radio flex flex-wrap gap-1.5" data-conf-group="w57_conf"></div>
            </div>

            <div>
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winning Total (kg, numbers only) <span class="text-red-400">*</span>
              </label>
              <input
                type="text"
                inputmode="numeric"
                pattern="^[0-9]{2,4}$"
                name="w57_total"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                placeholder="e.g. 506"
                required
              />
            </div>
          </div>

          <!-- WOMEN â€“ 63 kg -->
          <div class="mb-6 border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/60">
            <div class="flex items-center justify-between gap-2 mb-3">
              <h3 class="text-sm font-semibold text-white">
                63 kg Women
              </h3>
              <span class="text-[10px] text-gray-400 uppercase tracking-wide">
                Class 4 / 16
              </span>
            </div>

            <div class="mb-3">
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winner <span class="text-red-400">*</span>
              </label>
              <select
                name="w63_winner"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                required
              >
                <option value="">Select lifterâ€¦</option>
                <option>Sabrina Downes (487.5 kg)</option>
                <option>Makeda Vidal (480.5 kg)</option>
                <option>Suzanne Daniel (470 kg)</option>
                <option>Kathleen Smartt (447.5 kg)</option>
                <option>Tara Pigott (447.5 kg)</option>
                <option>Hannah Yardy (447.5 kg)</option>
                <option>Hannah Clayton (442.5 kg)</option>
                <option>Jessica Conti (422.5 kg)</option>
                <option>Lisa Kells (407.5 kg)</option>
                <option>Claudia Nicolson (407.5 kg)</option>
                <option>Katie Roberts (400 kg)</option>
                <option>Robyn Rocks (362.5 kg)</option>
                <option>Catriona Armstrong (347.5 kg)</option>
                <option>Leigh-Ann McQuillan (322.5 kg)</option>
              </select>
            </div>

            <div class="mb-3">
              <div class="flex items-center justify-between mb-1">
                <label class="block text-xs font-semibold text-gray-300">
                  Confidence Rating (1â€“16, unique) <span class="text-red-400">*</span>
                </label>
                <span class="text-[10px] text-gray-500">1 = least Â· 16 = most</span>
              </div>
              <div class="conf-radio flex flex-wrap gap-1.5" data-conf-group="w63_conf"></div>
            </div>

            <div>
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winning Total (kg, numbers only) <span class="text-red-400">*</span>
              </label>
              <input
                type="text"
                inputmode="numeric"
                pattern="^[0-9]{2,4}$"
                name="w63_total"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                placeholder="e.g. 487"
                required
              />
            </div>
          </div>

          <!-- WOMEN â€“ 69 kg -->
          <div class="mb-6 border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/60">
            <div class="flex items-center justify-between gap-2 mb-3">
              <h3 class="text-sm font-semibold text-white">
                69 kg Women
              </h3>
              <span class="text-[10px] text-gray-400 uppercase tracking-wide">
                Class 5 / 16
              </span>
            </div>

            <div class="mb-3">
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winner <span class="text-red-400">*</span>
              </label>
              <select
                name="w69_winner"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                required
              >
                <option value="">Select lifterâ€¦</option>
                <option>Annie Nelson (530 kg)</option>
                <option>Mariella Fisher (485 kg)</option>
                <option>Grace Stilgoe (483.5 kg)</option>
                <option>Benedetta Lupattelli Gencarelli (483 kg)</option>
                <option>Dominique Cox (470 kg)</option>
                <option>Helen Almond (470 kg)</option>
                <option>Amy Craig (462.5 kg)</option>
                <option>Katherine Brennan (460 kg)</option>
                <option>Christina Kio-Bennett (457.5 kg)</option>
                <option>Grace Allinson (457.5 kg)</option>
                <option>Louise Bray (455 kg)</option>
                <option>Stacie Jones (450 kg)</option>
                <option>Faye McKie (447.5kg)</option>
                <option>Dana Suitor (395 kg)</option>
              </select>
            </div>

            <div class="mb-3">
              <div class="flex items-center justify-between mb-1">
                <label class="block text-xs font-semibold text-gray-300">
                  Confidence Rating (1â€“16, unique) <span class="text-red-400">*</span>
                </label>
                <span class="text-[10px] text-gray-500">1 = least Â· 16 = most</span>
              </div>
              <div class="conf-radio flex flex-wrap gap-1.5" data-conf-group="w69_conf"></div>
            </div>

            <div>
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winning Total (kg, numbers only) <span class="text-red-400">*</span>
              </label>
              <input
                type="text"
                inputmode="numeric"
                pattern="^[0-9]{2,4}$"
                name="w69_total"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                placeholder="e.g. 530"
                required
              />
            </div>
          </div>

          <!-- WOMEN â€“ 76 kg -->
          <div class="mb-6 border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/60">
            <div class="flex items-center justify-between gap-2 mb-3">
              <h3 class="text-sm font-semibold text-white">
                76 kg Women
              </h3>
              <span class="text-[10px] text-gray-400 uppercase tracking-wide">
                Class 6 / 16
              </span>
            </div>

            <div class="mb-3">
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winner <span class="text-red-400">*</span>
              </label>
              <select
                name="w76_winner"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                required
              >
                <option value="">Select lifterâ€¦</option>
                <option>Temitope Nuga (532.5 kg)</option>
                <option>Ayana Porteous-Simpson (530 kg)</option>
                <option>Bettina Hanlon (520 kg)</option>
                <option>Llio Godfrey-Flower (519.5 kg)</option>
                <option>Alice Francis-Freeman (512.5 kg)</option>
                <option>Romy Grieve (487.5 kg)</option>
                <option>Aimee Guthrie (485.5 kg)</option>
                <option>Ella Dronfield (481.5 kg)</option>
                <option>Indiana Montaque (480 kg)</option>
                <option>Naomi James (477.5 kg)</option>
                <option>Millie Mabbutt (453.5 kg)</option>
                <option>Charleigh Lacey (450 kg)</option>
                <option>Izzy Hartley (445 kg)</option>
              </select>
            </div>

            <div class="mb-3">
              <div class="flex items-center justify-between mb-1">
                <label class="block text-xs font-semibold text-gray-300">
                  Confidence Rating (1â€“16, unique) <span class="text-red-400">*</span>
                </label>
                <span class="text-[10px] text-gray-500">1 = least Â· 16 = most</span>
              </div>
              <div class="conf-radio flex flex-wrap gap-1.5" data-conf-group="w76_conf"></div>
            </div>

            <div>
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winning Total (kg, numbers only) <span class="text-red-400">*</span>
              </label>
              <input
                type="text"
                inputmode="numeric"
                pattern="^[0-9]{2,4}$"
                name="w76_total"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                placeholder="e.g. 532"
                required
              />
            </div>
          </div>

          <!-- WOMEN â€“ 84 kg -->
          <div class="mb-6 border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/60">
            <div class="flex items-center justify-between gap-2 mb-3">
              <h3 class="text-sm font-semibold text-white">
                84 kg Women
              </h3>
              <span class="text-[10px] text-gray-400 uppercase tracking-wide">
                Class 7 / 16
              </span>
            </div>

            <div class="mb-3">
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winner <span class="text-red-400">*</span>
              </label>
              <select
                name="w84_winner"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                required
              >
                <option value="">Select lifterâ€¦</option>
                <option>Ziana Azariah (600 kg)</option>
                <option>Melina Irawo (555.5 kg)</option>
                <option>Racheal Raji (507.5 kg)</option>
                <option>Hollie Tobun (502.5 kg)</option>
                <option>Sian Arterton (492.5 kg)</option>
                <option>Hettie Simpson (480 kg)</option>
                <option>Abigail Marshall (455 kg)</option>
                <option>Hanah Andrew (454 kg)</option>
                <option>Caitlin Dinnen (427.5 kg)</option>
                <option>Ellen Judson (415 kg)</option>
                <option>Sally Sweeny (412.5 kg)</option>
                <option>Sarah Rose (407.5 kg)</option>
                <option>Terri Britton (352.5 kg)</option>
              </select>
            </div>

            <div class="mb-3">
              <div class="flex items-center justify-between mb-1">
                <label class="block text-xs font-semibold text-gray-300">
                  Confidence Rating (1â€“16, unique) <span class="text-red-400">*</span>
                </label>
                <span class="text-[10px] text-gray-500">1 = least Â· 16 = most</span>
              </div>
              <div class="conf-radio flex flex-wrap gap-1.5" data-conf-group="w84_conf"></div>
            </div>

            <div>
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winning Total (kg, numbers only) <span class="text-red-400">*</span>
              </label>
              <input
                type="text"
                inputmode="numeric"
                pattern="^[0-9]{2,4}$"
                name="w84_total"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                placeholder="e.g. 600"
                required
              />
            </div>
          </div>

          <!-- WOMEN â€“ 84+ kg -->
          <div class="mb-2 border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/60">
            <div class="flex items-center justify-between gap-2 mb-3">
              <h3 class="text-sm font-semibold text-white">
                84+ kg Women
              </h3>
              <span class="text-[10px] text-gray-400 uppercase tracking-wide">
                Class 8 / 16
              </span>
            </div>

            <div class="mb-3">
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winner <span class="text-red-400">*</span>
              </label>
              <select
                name="w84p_winner"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                required
              >
                <option value="">Select lifterâ€¦</option>
                <option>Aquinn Onuoha (618.5 kg)</option>
                <option>Toyosi Omotoso (615.5 kg)</option>
                <option>Dominique Fortune (572.5 kg)</option>
                <option>Mel Rawsthrone (517.5 kg)</option>
                <option>Victoria Cavalier-Hirth (517.5 kg)</option>
                <option>Caitlin Davies (510 kg)</option>
                <option>Rebecca Coggle (507.5 kg)</option>
                <option>Catriona Bell (500 kg)</option>
                <option>Milly Stoneley (482.5 kg)</option>
                <option>Scarlett Sotiris (475 kg)</option>
                <option>Victoria Alli (470 kg)</option>
                <option>Jennifer Payet (455 kg)</option>
                <option>Jenna Turner (455 kg)</option>
                <option>Annalisa Valente (450 kg)</option>
              </select>
            </div>

            <div class="mb-3">
              <div class="flex items-center justify-between mb-1">
                <label class="block text-xs font-semibold text-gray-300">
                  Confidence Rating (1â€“16, unique) <span class="text-red-400">*</span>
                </label>
                <span class="text-[10px] text-gray-500">1 = least Â· 16 = most</span>
              </div>
              <div class="conf-radio flex flex-wrap gap-1.5" data-conf-group="w84p_conf"></div>
            </div>

            <div>
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winning Total (kg, numbers only) <span class="text-red-400">*</span>
              </label>
              <input
                type="text"
                inputmode="numeric"
                pattern="^[0-9]{2,4}$"
                name="w84p_total"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                placeholder="e.g. 618"
                required
              />
            </div>
          </div>
        </div>

        <!-- Step 2: Menâ€™s classes -->
        <div class="form-step hidden" data-step="2">
          <h2 class="text-base sm:text-lg font-semibold text-red-400 mb-3">
            Step 2 â€“ Menâ€™s Weight Classes
          </h2>

          <!-- MEN â€“ 59 kg -->
          <div class="mb-6 border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/60">
            <div class="flex items-center justify-between gap-2 mb-3">
              <h3 class="text-sm font-semibold text-white">
                59 kg Men
              </h3>
              <span class="text-[10px] text-gray-400 uppercase tracking-wide">
                Class 9 / 16
              </span>
            </div>
            <div class="mb-3">
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winner <span class="text-red-400">*</span>
              </label>
              <select
                name="m59_winner"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                required
              >
                <option value="">Select lifterâ€¦</option>
                <option>Salman Desai (435 kg)</option>
                <option>Samuel Parkin (432.5 kg)</option>
                <option>James Donnelley (430 kg)</option>
                <option>Tejay Hall (320 kg)</option>
              </select>
            </div>
            <div class="mb-3">
              <div class="flex items-center justify-between mb-1">
                <label class="block text-xs font-semibold text-gray-300">
                  Confidence Rating (1â€“16, unique) <span class="text-red-400">*</span>
                </label>
                <span class="text-[10px] text-gray-500">1 = least Â· 16 = most</span>
              </div>
              <div class="conf-radio flex flex-wrap gap-1.5" data-conf-group="m59_conf"></div>
            </div>
            <div>
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winning Total (kg, numbers only) <span class="text-red-400">*</span>
              </label>
              <input
                type="text"
                inputmode="numeric"
                pattern="^[0-9]{2,4}$"
                name="m59_total"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                placeholder="e.g. 435"
                required
              />
            </div>
          </div>

          <!-- MEN â€“ 66 kg -->
          <div class="mb-6 border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/60">
            <div class="flex items-center justify-between gap-2 mb-3">
              <h3 class="text-sm font-semibold text-white">
                66 kg Men
              </h3>
              <span class="text-[10px] text-gray-400 uppercase tracking-wide">
                Class 10 / 16
              </span>
            </div>
            <div class="mb-3">
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winner <span class="text-red-400">*</span>
              </label>
              <select
                name="m66_winner"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                required
              >
                <option value="">Select lifterâ€¦</option>
                <option>Joseph Diva (650.5 kg)</option>
                <option>Benedict Grant (630 kg)</option>
                <option>Ishtyaq Nabi (627.5 kg)</option>
                <option>Ibnu Ayyub (567.5 kg)</option>
                <option>Connor McKay (500 kg)</option>
                <option>Matt Chan (487.5 kg)</option>
                <option>Hari Swaminathan (462.5 kg)</option>
              </select>
            </div>
            <div class="mb-3">
              <div class="flex items-center justify-between mb-1">
                <label class="block text-xs font-semibold text-gray-300">
                  Confidence Rating (1â€“16, unique) <span class="text-red-400">*</span>
                </label>
                <span class="text-[10px] text-gray-500">1 = least Â· 16 = most</span>
              </div>
              <div class="conf-radio flex flex-wrap gap-1.5" data-conf-group="m66_conf"></div>
            </div>
            <div>
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winning Total (kg, numbers only) <span class="text-red-400">*</span>
              </label>
              <input
                type="text"
                inputmode="numeric"
                pattern="^[0-9]{2,4}$"
                name="m66_total"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                placeholder="e.g. 650"
                required
              />
            </div>
          </div>

          <!-- MEN â€“ 74 kg -->
          <div class="mb-6 border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/60">
            <div class="flex items-center justify-between gap-2 mb-3">
              <h3 class="text-sm font-semibold text-white">
                74 kg Men
              </h3>
              <span class="text-[10px] text-gray-400 uppercase tracking-wide">
                Class 11 / 16
              </span>
            </div>
            <div class="mb-3">
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winner <span class="text-red-400">*</span>
              </label>
              <select
                name="m74_winner"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                required
              >
                <option value="">Select lifterâ€¦</option>
                <option>Sam Dew (712.5 kg)</option>
                <option>Krishan Mistry (707.5 kg)</option>
                <option>Jac Lewis (685.5 kg)</option>
                <option>Kibria Ali (685 kg)</option>
                <option>Scott Walton (670.5 kg)</option>
                <option>Alex Fodor (665 kg)</option>
                <option>Abdul Wajid Butt (650 kg)</option>
                <option>Ehis Izokun (645 kg)</option>
                <option>George Sandoe (632.5 kg)</option>
                <option>Kieran Drysdale (615 kg)</option>
                <option>Godfrey Chau (560 kg)</option>
                <option>Carl Mullet (537.5 kg)</option>
              </select>
            </div>
            <div class="mb-3">
              <div class="flex items-center justify-between mb-1">
                <label class="block text-xs font-semibold text-gray-300">
                  Confidence Rating (1â€“16, unique) <span class="text-red-400">*</span>
                </label>
                <span class="text-[10px] text-gray-500">1 = least Â· 16 = most</span>
              </div>
              <div class="conf-radio flex flex-wrap gap-1.5" data-conf-group="m74_conf"></div>
            </div>
            <div>
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winning Total (kg, numbers only) <span class="text-red-400">*</span>
              </label>
              <input
                type="text"
                inputmode="numeric"
                pattern="^[0-9]{2,4}$"
                name="m74_total"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                placeholder="e.g. 713"
                required
              />
            </div>
          </div>

          <!-- MEN â€“ 83 kg -->
          <div class="mb-6 border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/60">
            <div class="flex items-center justify-between gap-2 mb-3">
              <h3 class="text-sm font-semibold text-white">
                83 kg Men
              </h3>
              <span class="text-[10px] text-gray-400 uppercase tracking-wide">
                Class 12 / 16
              </span>
            </div>
            <div class="mb-3">
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winner <span class="text-red-400">*</span>
              </label>
              <select
                name="m83_winner"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                required
              >
                <option value="">Select lifterâ€¦</option>
                <option>Jurins Kengamu (872.5 kg)</option>
                <option>Ade Omisakin (850 kg)</option>
                <option>Tyri Miller (787.5 kg)</option>
                <option>Owen Hubbard (772.5 kg)</option>
                <option>Chinedum Okolo (750 kg)</option>
                <option>Alex Bishop (747.5 kg)</option>
                <option>Luke Paranal (745 kg)</option>
                <option>Darius Kwong (740 kg)</option>
                <option>Max Marshall (692.5 kg)</option>
                <option>Christopher La (687.5 kg)</option>
                <option>John Bermudez (667.5 kg)</option>
                <option>Gabriel Trych (655 kg)</option>
                <option>Daniel Dyszkant (645 kg)</option>
                <option>Jordan Horne (632.5 kg)</option>
              </select>
            </div>
            <div class="mb-3">
              <div class="flex items-center justify-between mb-1">
                <label class="block text-xs font-semibold text-gray-300">
                  Confidence Rating (1â€“16, unique) <span class="text-red-400">*</span>
                </label>
                <span class="text-[10px] text-gray-500">1 = least Â· 16 = most</span>
              </div>
              <div class="conf-radio flex flex-wrap gap-1.5" data-conf-group="m83_conf"></div>
            </div>
            <div>
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winning Total (kg, numbers only) <span class="text-red-400">*</span>
              </label>
              <input
                type="text"
                inputmode="numeric"
                pattern="^[0-9]{2,4}$"
                name="m83_total"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                placeholder="e.g. 872"
                required
              />
            </div>
          </div>

          <!-- MEN â€“ 93 kg -->
          <div class="mb-6 border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/60">
            <div class="flex items-center justify-between gap-2 mb-3">
              <h3 class="text-sm font-semibold text-white">
                93 kg Men
              </h3>
              <span class="text-[10px] text-gray-400 uppercase tracking-wide">
                Class 13 / 16
              </span>
            </div>
            <div class="mb-3">
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winner <span class="text-red-400">*</span>
              </label>
              <select
                name="m93_winner"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                required
              >
                <option value="">Select lifterâ€¦</option>
                <option>Christian Ayandokun (878.5 kg)</option>
                <option>Maxwell Gyamfi (850 kg)</option>
                <option>James Adcock (825 kg)</option>
                <option>Jonathan Lewis (815.5 kg)</option>
                <option>Jay Batten (800 kg)</option>
                <option>Nathan Gevao (800 kg)</option>
                <option>Demi Fatona (787.5 kg)</option>
                <option>Harrison Sparks (780 kg)</option>
                <option>Max Mansell-Rowe (777.5 kg)</option>
                <option>Jamie Cadogan (773.5 kg)</option>
                <option>Cyrus Khine (767.5 kg)</option>
                <option>Declan Powell (762.5 kg)</option>
                <option>Nicolas Ribeiro (730.5 kg)</option>
                <option>Nicholas Hwong (712.5 kg)</option>
              </select>
            </div>
            <div class="mb-3">
              <div class="flex items-center justify-between mb-1">
                <label class="block text-xs font-semibold text-gray-300">
                  Confidence Rating (1â€“16, unique) <span class="text-red-400">*</span>
                </label>
                <span class="text-[10px] text-gray-500">1 = least Â· 16 = most</span>
              </div>
              <div class="conf-radio flex flex-wrap gap-1.5" data-conf-group="m93_conf"></div>
            </div>
            <div>
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winning Total (kg, numbers only) <span class="text-red-400">*</span>
              </label>
              <input
                type="text"
                inputmode="numeric"
                pattern="^[0-9]{2,4}$"
                name="m93_total"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                placeholder="e.g. 879"
                required
              />
            </div>
          </div>

          <!-- MEN â€“ 105 kg -->
          <div class="mb-6 border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/60">
            <div class="flex items-center justify-between gap-2 mb-3">
              <h3 class="text-sm font-semibold text-white">
                105 kg Men
              </h3>
              <span class="text-[10px] text-gray-400 uppercase tracking-wide">
                Class 14 / 16
              </span>
            </div>
            <div class="mb-3">
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winner <span class="text-red-400">*</span>
              </label>
              <select
                name="m105_winner"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                required
              >
                <option value="">Select lifterâ€¦</option>
                <option>Nathaniel Massiah (895 kg)</option>
                <option>Sanchez Dillon (882.5 kg)</option>
                <option>Ben Pape (865 kg)</option>
                <option>Cejai Lindsay (840.5 kg)</option>
                <option>Sam Cook (815 kg)</option>
                <option>Emmanouil Olympios Mavriotis (810 kg)</option>
                <option>Andrew Wallace (805 kg)</option>
                <option>William Ndubueze (802.5 kg)</option>
                <option>Kayode Tobun (787.5 kg)</option>
                <option>Brandon Burnett-Uzoka (780 kg)</option>
                <option>William Greaves (767.5 kg)</option>
                <option>Jack Gilchrist (762.5 kg)</option>
              </select>
            </div>
            <div class="mb-3">
              <div class="flex items-center justify-between mb-1">
                <label class="block text-xs font-semibold text-gray-300">
                  Confidence Rating (1â€“16, unique) <span class="text-red-400">*</span>
                </label>
                <span class="text-[10px] text-gray-500">1 = least Â· 16 = most</span>
              </div>
              <div class="conf-radio flex flex-wrap gap-1.5" data-conf-group="m105_conf"></div>
            </div>
            <div>
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winning Total (kg, numbers only) <span class="text-red-400">*</span>
              </label>
              <input
                type="text"
                inputmode="numeric"
                pattern="^[0-9]{2,4}$"
                name="m105_total"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                placeholder="e.g. 895"
                required
              />
            </div>
          </div>

          <!-- MEN â€“ 120 kg -->
          <div class="mb-6 border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/60">
            <div class="flex items-center justify-between gap-2 mb-3">
              <h3 class="text-sm font-semibold text-white">
                120 kg Men
              </h3>
              <span class="text-[10px] text-gray-400 uppercase tracking-wide">
                Class 15 / 16
              </span>
            </div>
            <div class="mb-3">
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winner <span class="text-red-400">*</span>
              </label>
              <select
                name="m120_winner"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                required
              >
                <option value="">Select lifterâ€¦</option>
                <option>Joshua Ngoka (945.5 kg)</option>
                <option>Abdul Majeed Sulayman (930 kg)</option>
                <option>Nonso Chinye (930 kg)</option>
                <option>Lewis Kelly (855.5 kg)</option>
                <option>Curtis McLaren (847.5 kg)</option>
                <option>Trevor Jordan (840 kg)</option>
                <option>Sam Nayler (830 kg)</option>
                <option>Finn Wood (815 kg)</option>
                <option>Mamoke Akaunu (810 kg)</option>
                <option>Alexander Jackson (807.5 kg)</option>
                <option>Jordaine Jones (807.5 kg)</option>
                <option>Hector Van Smirren (762.5 kg)</option>
              </select>
            </div>
            <div class="mb-3">
              <div class="flex items-center justify-between mb-1">
                <label class="block text-xs font-semibold text-gray-300">
                  Confidence Rating (1â€“16, unique) <span class="text-red-400">*</span>
                </label>
                <span class="text-[10px] text-gray-500">1 = least Â· 16 = most</span>
              </div>
              <div class="conf-radio flex flex-wrap gap-1.5" data-conf-group="m120_conf"></div>
            </div>
            <div>
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winning Total (kg, numbers only) <span class="text-red-400">*</span>
              </label>
              <input
                type="text"
                inputmode="numeric"
                pattern="^[0-9]{2,4}$"
                name="m120_total"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                placeholder="e.g. 946"
                required
              />
            </div>
          </div>

          <!-- MEN â€“ 120+ kg -->
          <div class="mb-2 border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/60">
            <div class="flex items-center justify-between gap-2 mb-3">
              <h3 class="text-sm font-semibold text-white">
                120+ kg Men
              </h3>
              <span class="text-[10px] text-gray-400 uppercase tracking-wide">
                Class 16 / 16
              </span>
            </div>
            <div class="mb-3">
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winner <span class="text-red-400">*</span>
              </label>
              <select
                name="m120p_winner"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                required
              >
                <option value="">Select lifterâ€¦</option>
                <option>Ajay Sharma (1,001 kg)</option>
                <option>Paul Kirkbride-Richards (960 kg)</option>
                <option>Ray Bowring (915 kg)</option>
                <option>Kyrone Randolph (820 kg)</option>
                <option>George Nash (772.5 kg)</option>
                <option>Ben Gibson (760.5 kg)</option>
                <option>Jordan Leonard (755 kg)</option>
                <option>Charlie Darke (692.5 kg)</option>
                <option>Ross Shahin-Ajerlo (666 kg)</option>
                <option>Nimrod Avissar (625 kg)</option>
              </select>
            </div>
            <div class="mb-3">
              <div class="flex items-center justify-between mb-1">
                <label class="block text-xs font-semibold text-gray-300">
                  Confidence Rating (1â€“16, unique) <span class="text-red-400">*</span>
                </label>
                <span class="text-[10px] text-gray-500">1 = least Â· 16 = most</span>
              </div>
              <div class="conf-radio flex flex-wrap gap-1.5" data-conf-group="m120p_conf"></div>
            </div>
            <div>
              <label class="block text-xs font-semibold text-gray-300 mb-1.5">
                Predicted Winning Total (kg, numbers only) <span class="text-red-400">*</span>
              </label>
              <input
                type="text"
                inputmode="numeric"
                pattern="^[0-9]{2,4}$"
                name="m120p_total"
                class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
                placeholder="e.g. 1001"
                required
              />
            </div>
          </div>
        </div>

        <!-- Step 3: Best Lifters + submit -->
        <div class="form-step hidden" data-step="3">
          <h2 class="text-base sm:text-lg font-semibold text-red-400 mb-3">
            Step 3 â€“ Overall Best Lifters & Submit
          </h2>

          <div class="border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/60 mb-4">
            <p class="text-xs text-gray-300">
              This final section is optional but will be used as a final tiebreaker if needed.
            </p>
            <p class="mt-1 text-[11px] text-gray-400">
              Predict which lifters will achieve the highest IPF Goodlift Points (GL) across all female and male lifters.
            </p>
          </div>

          <div class="mb-4 border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/70">
            <label class="block text-xs font-semibold text-gray-300 mb-1.5">
              Female Best Lifter (Overall)
            </label>
            <input
              type="text"
              name="female_best_lifter"
              class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
              placeholder="Enter lifter name (optional)"
            />
          </div>

          <div class="mb-4 border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/70">
            <label class="block text-xs font-semibold text-gray-300 mb-1.5">
              Male Best Lifter (Overall)
            </label>
            <input
              type="text"
              name="male_best_lifter"
              class="w-full rounded-md border border-gray-700 bg-gray-900/80 px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-red-400"
              placeholder="Enter lifter name (optional)"
            />
          </div>

          <div class="mt-4 border border-gray-800 rounded-xl p-3 sm:p-4 bg-gray-900/70">
            <p class="text-[11px] text-gray-300">
              After submitting, a confirmation email with your full predictions and a link to edit your entry will be sent from
              <span class="font-semibold text-red-300">britishclassicfl@gmail.com</span>.  
              Please check your junk/spam folder if it doesnâ€™t appear within a few minutes.
            </p>
          </div>
        </div>

        <!-- Navigation buttons -->
        <div class="flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 pt-4 border-t border-gray-800">
          <button
            type="button"
            id="prev-btn"
            class="w-full sm:w-auto inline-flex items-center justify-center rounded-full border border-gray-700 bg-gray-900/70 px-4 py-2 text-xs font-semibold text-gray-300 hover:bg-gray-800 hover:text-white disabled:opacity-40 disabled:cursor-not-allowed transition"
          >
            â† Previous
          </button>

          <div class="flex-1"></div>

          <button
            type="button"
            id="next-btn"
            class="w-full sm:w-auto inline-flex items-center justify-center rounded-full border border-red-500 bg-red-500/90 px-6 py-2 text-xs font-semibold text-gray-100 hover:bg-red-500 hover:border-red-400 transition"
          >
            Next â†’
          </button>

          <button
            type="submit"
            id="submit-btn"
            class="hidden w-full sm:w-auto inline-flex items-center justify-center rounded-full border border-emerald-500 bg-emerald-500/90 px-6 py-2 text-xs font-semibold text-gray-900 hover:bg-emerald-400 transition"
          >
            Submit Predictions ðŸ†
          </button>
        </div>

        <!-- Status message -->
        <p id="status-msg" class="mt-3 text-[11px] text-gray-400"></p>
      </form>
    </div>
  </div>

  <script>
    const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyYn1FEEVNpE9uZsX7NlVKK_05XIVGH2vjST9pxwUkO_H05NV2fA-Fab3KTyI930A/exec'; // TODO: replace with your Apps Script Web App URL

    // ----- Step / pagination control -----
    const steps = Array.from(document.querySelectorAll('.form-step'));
    const stepLabel = document.getElementById('step-label');
    const dot1 = document.getElementById('dot-1');
    const dot2 = document.getElementById('dot-2');
    const dot3 = document.getElementById('dot-3');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const submitBtn = document.getElementById('submit-btn');
    const statusMsg = document.getElementById('status-msg');

    let currentStep = 1;
    const totalSteps = 3;

    function updateStepUI() {
      steps.forEach(stepEl => {
        const step = Number(stepEl.dataset.step);
        stepEl.classList.toggle('hidden', step !== currentStep);
      });
      stepLabel.textContent = `Step ${currentStep} of ${totalSteps}`;

      dot1.className = 'h-1.5 w-6 rounded-full ' + (currentStep === 1 ? 'bg-red-500' : 'bg-gray-700');
      dot2.className = 'h-1.5 w-6 rounded-full ' + (currentStep === 2 ? 'bg-red-500' : 'bg-gray-700');
      dot3.className = 'h-1.5 w-6 rounded-full ' + (currentStep === 3 ? 'bg-red-500' : 'bg-gray-700');

      prevBtn.disabled = currentStep === 1;
      nextBtn.classList.toggle('hidden', currentStep === totalSteps);
      submitBtn.classList.toggle('hidden', currentStep !== totalSteps);
    }

    function validateStep(step) {
      const stepEl = steps.find(s => Number(s.dataset.step) === step);
      if (!stepEl) return true;

      let valid = true;
      const fields = stepEl.querySelectorAll('select[required], input[required]');
      const radioGroupsChecked = {};

      for (const field of fields) {
        if (field.type === 'radio') {
          const name = field.name;
          if (radioGroupsChecked[name]) continue;
          const checked = stepEl.querySelector(`input[type="radio"][name="${name}"]:checked`);
          if (!checked) {
            valid = false;
            alert('Please complete all required confidence ratings on this step.');
            break;
          }
          radioGroupsChecked[name] = true;
        } else if (!field.value || !field.value.trim()) {
          valid = false;
          alert('Please complete all required fields on this step before continuing.');
          field.focus();
          break;
        } else if (field.pattern) {
          const re = new RegExp(field.pattern);
          if (!re.test(field.value.trim())) {
            valid = false;
            alert('Please check your numeric totals â€“ they should be numbers only, without units.');
            field.focus();
            break;
          }
        }
      }

      return valid;
    }

    prevBtn.addEventListener('click', () => {
      if (currentStep > 1) {
        currentStep -= 1;
        updateStepUI();
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    });

    nextBtn.addEventListener('click', () => {
      if (!validateStep(currentStep)) return;
      if (currentStep < totalSteps) {
        currentStep += 1;
        updateStepUI();
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    });

    // ----- Confidence rating: unique 1â€“16 across all 16 classes -----
    const CONF_VALUES = Array.from({ length: 16 }, (_, i) => String(i + 1));
    const confGroups = document.querySelectorAll('.conf-radio');

    // Helper: render radios for each group
    confGroups.forEach(groupEl => {
      const groupName = groupEl.dataset.confGroup || groupEl.closest('[data-conf-group]')?.dataset.confGroup;
      const confKey = groupName || groupEl.closest('[name]')?.getAttribute('name');
      const name = confKey || groupEl.closest('[data-conf-group]')?.dataset.confGroup;

      const actualName = groupEl.dataset.confGroup || groupEl.closest('.mb-6, .mb-2')?.querySelector('select')?.name.replace('_winner', '_conf') || '';

      const finalName = groupEl.dataset.confGroup || actualName;
      groupEl.dataset.confGroup = finalName;

      CONF_VALUES.forEach(val => {
        const id = `${finalName}_${val}`;
        const wrapper = document.createElement('div');
        wrapper.className = 'flex items-center';

        const input = document.createElement('input');
        input.type = 'radio';
        input.name = finalName;
        input.value = val;
        input.id = id;
        input.setAttribute('data-conf', finalName);

        const label = document.createElement('label');
        label.setAttribute('for', id);
        label.className = 'border border-gray-700 text-gray-300';
        label.textContent = val;

        wrapper.appendChild(input);
        wrapper.appendChild(label);
        groupEl.appendChild(wrapper);
      });
    });

    const confSelections = {};   // groupName -> value
    const usedValues = {};       // value -> groupName

    function handleConfChange(e) {
      const input = e.target;
      if (input.type !== 'radio' || !input.dataset.conf) return;

      const group = input.dataset.conf;
      const newVal = input.value;
      const prevVal = confSelections[group];

      if (prevVal === newVal) return;

      // If value already used elsewhere, prevent duplicate
      const existingGroup = usedValues[newVal];
      if (existingGroup && existingGroup !== group) {
        alert(`Confidence rating ${newVal} is already used. Each number from 1â€“16 can only be used once across all classes.`);
        input.checked = false;
        return;
      }

      // Update maps
      if (prevVal) {
        delete usedValues[prevVal];
        // Re-enable prevVal in other groups
        const others = document.querySelectorAll(`input[type="radio"][data-conf][value="${prevVal}"]`);
        others.forEach(r => {
          if (r.dataset.conf !== group && !r.checked) {
            r.disabled = false;
          }
        });
      }

      confSelections[group] = newVal;
      usedValues[newVal] = group;

      // Disable newVal in all other groups
      const sameValRadios = document.querySelectorAll(`input[type="radio"][data-conf][value="${newVal}"]`);
      sameValRadios.forEach(r => {
        if (r.dataset.conf !== group) {
          r.disabled = true;
        }
      });
    }

    document.addEventListener('change', handleConfChange);

    // ----- Submit handler -----
    const form = document.getElementById('fantasy-form');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      statusMsg.textContent = '';
      if (!validateStep(currentStep)) return;

      // simple extra check: all 16 confidence groups selected
      const allConfNames = [
        'w47_conf','w52_conf','w57_conf','w63_conf','w69_conf','w76_conf','w84_conf','w84p_conf',
        'm59_conf','m66_conf','m74_conf','m83_conf','m93_conf','m105_conf','m120_conf','m120p_conf'
      ];
      for (const name of allConfNames) {
        const checked = document.querySelector(`input[type="radio"][name="${name}"]:checked`);
        if (!checked) {
          alert('Please assign a unique confidence rating (1â€“16) to every weight class before submitting.');
          return;
        }
      }

      const formData = new FormData(form);
      // Append confidence values explicitly
      allConfNames.forEach(name => {
        const checked = document.querySelector(`input[type="radio"][name="${name}"]:checked`);
        if (checked) formData.set(name, checked.value);
      });

      statusMsg.textContent = 'Submitting your entryâ€¦ please wait.';
      statusMsg.className = 'mt-3 text-[11px] text-blue-300';

      try {
        const res = await fetch(SCRIPT_URL, {
          method: 'POST',
          body: formData,
        });

        if (!res.ok) {
          throw new Error(`HTTP ${res.status}`);
        }

        const text = await res.text();
        console.log('Submission response:', text);

        form.reset();
        statusMsg.textContent = 'Entry submitted! Please check your email for confirmation and your edit link (remember to check spam/junk).';
        statusMsg.className = 'mt-3 text-[11px] text-emerald-300';

        currentStep = 1;
        updateStepUI();
        window.scrollTo({ top: 0, behavior: 'smooth' });
      } catch (err) {
        console.error(err);
        statusMsg.textContent = 'There was a problem submitting your entry. Please try again in a moment.';
        statusMsg.className = 'mt-3 text-[11px] text-red-300';
      }
    });

    // Initialize
    updateStepUI();
  </script>
</body>
</html>
